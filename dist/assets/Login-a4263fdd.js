import{d,o as p,c as m,a as I,t as S,b as h,_ as f,u as b,r,e as g,n as v,f as w,w as L,g as F,h as x,F as B,i as _,j as $,p as P,k,l as y}from"./index-164f1b2b.js";import{a as C,s as E}from"./axios-8938ec0c.js";const N=["id"],R=d({__name:"InputField",props:{input:null},setup(e){return(o,t)=>(p(),m("label",null,[I(S(e.input.field)+" ",1),h("input",{id:e.input.inputId,class:"form-input",type:"text"},null,8,N)]))}}),T=f(R,[["__scopeId","data-v-40025745"]]),V=d({__name:"Loading",setup(e){const o=b(),t=r(!1),s=r(!1),i=r(!1);return o.$subscribe((u,a)=>{switch(a.currState){case"Loading":t.value=!0;break;case"Welcome":t.value=!1,s.value=!0;break;case"Failed":t.value=!1,i.value=!0}}),(u,a)=>(p(),m("div",{class:v(["loading-container",{isLoading:t.value,isResult:s.value,failed:i.value}])},S(g(o).currLoginState),3))}}),z=f(V,[["__scopeId","data-v-e9fc24a6"]]),D=d({__name:"Form",props:{FormInfos:null,toSubmit:{type:Boolean}},setup(e){const o=e,t=[],s=b(),i=w();L(o,(a,n)=>{if(console.log(n),n.toSubmit){s.setLoginState("Loading");let c=u();C({method:"post",url:E+"/authenticate",data:c,withCredentials:!0}).then(l=>{l.status==200?(console.log(l),s.setLoginState("Welcome"),i.setId(l.data.id)):s.setLoginState("Error")})}}),F(()=>{o.FormInfos.map((a,n)=>t.push({field:a.field,value:a.value,inputId:n.toString()}))});const u=()=>{const a={};return t.map(n=>{console.log(n);let c=n.inputId,l=document.getElementById(c).value;a[n.field]=l}),a};return(a,n)=>(p(),m(B,null,x(t,c=>_(T,{input:c},null,8,["input"])),64))}}),W=d({__name:"Button",props:{buttonProps:null},setup(e){const o=e,t=o.buttonProps.height===void 0?10:o.buttonProps.height,s=o.buttonProps.width===void 0?2:o.buttonProps.width;return(i,u)=>(p(),m("div",{class:"button",style:$({height:`${g(s)}rem`,width:`${g(t)}rem`})},[h("p",null,S(e.buttonProps.text),1)],4))}}),j=f(W,[["__scopeId","data-v-c00f1c01"]]),M=e=>(P("data-v-7463439b"),e=e(),k(),e),O=M(()=>h("p",{class:"header"},"Chatroom",-1)),U=d({__name:"Login",setup(e){const o=y(),t=r(!1),s=b(),i=r(!1);L(()=>s.isSuccess,()=>{s.isSuccess&&(console.log("switching animation"),i.value=!0,setTimeout(()=>o.push("/chat"),1e3))});function u(){t.value=!0}return(a,n)=>(p(),m("div",{class:v(["login-container base-shadow-div",{SwitchToChat:i.value}])},[O,_(z),h("div",{class:v({"form-wrapper":!0,"loading-state-transition":g(s).isLoading})},[_(D,{FormInfos:[{field:"username",value:""},{field:"password",value:""}],toSubmit:t.value},null,8,["toSubmit"]),_(j,{buttonProps:{text:"Login"},onClick:u})],2)],2))}}),G=f(U,[["__scopeId","data-v-7463439b"]]);export{G as default};
